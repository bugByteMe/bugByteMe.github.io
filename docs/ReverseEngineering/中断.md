#### DOS 中断向量表

**0:0~0:3FF** 共400h字节的内容称为中断向量表

其中每4个字节称为一个中断向量，例如:

**0:0~0:3**用来保存int 00h的中断向量;

**0:4~0:7**用来保存int 01h的中断向量; 先偏移地址，后段地址

例：12 34 56 78 -> 7856: 3412

#### WINDOWS 中断

Windows下的单步可以用**SEH(Self Exception Handler)**实现。
seh结构有两个成员，一个是当前seh函数的地址，一个是上一层she结构的指针

```c
struct SEH{
	SEH *parentSEH;
	void *handler;
}
```

![img](https://img-blog.csdn.net/20161016165459218?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

构造seh，并与caller的seh衔接

```assembly
push myseh			   ;myhandler addr
push dword ptr fs:[0]   ;parentSEH addr
// The two dword above compose an SEH struct

mov fs:[0], esp         ;newSEH struct addr

// Trigger int1 interrupt
pushfd
pushfd ; push EFL
pop eax ; eax = EFL
or eax, 100h ; 第8位标志=1
push eax
popfd ; TF=1
nop
```